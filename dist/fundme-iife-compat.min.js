"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var fund=function(t){function e(t){return function(t,e){t?t.content=e:t=function(t){var e=document.createElement("meta");return e.name="monetization",e.content=t,document.head.appendChild(e),e}(e);return t}(document.querySelector('meta[name="monetization"]'),t)}function n(t){e(t)}var r="Fundme.js: default address not found. Use setDefaultAddress(str: string) to set it first.",i="Fundme.js: Invalid Web Monetization pointer address is given.",o="Fundme.js: address not found.",a="Fundme.js: address must be a string.";var u="Fundme.js: no monetization template is found.",s="Fundme.js: <template /> has no data-fund attribute to parse.",d="Fundme.js: found single <template data-fund /> but has weight - only address will be parsed.",f=5;function l(t){e(function(t){var e=t.address;if(!e)throw new Error(o);if("string"!=typeof e)throw new Error(a);return e}(function(t){var e=function(t){return Math.random()*t}(function(t){var e=t.map(function(t){return t.weight});return Object.values(e).reduce(function(t,e){return t+e},0)}(t));return function(t,e){for(var n in t)if((e-=t[n].weight)<=0)return t[n]}(t,e)}(function(t){return t.map(function(t){if("string"==typeof t&&(t={address:t,weight:f}),!("address"in t))throw new Error(o);return c(t)})}(t))))}function c(t){return void 0!==t.weight&&NaN!==t.weight||(console.warn("Fundme.js: "+t.address+" has weight that is not a number. It has been set to "+f+" (default)."),t.weight=f),t}function m(){var t=function(){var t=document.body.querySelectorAll("template[data-fund]"),e=[];if(!(t.length>0))throw new Error(u);t.forEach(function(t){var n=function(t){var e=t.dataset.fund,n=parseInt(t.dataset.fundWeight);if(!e)throw new Error(s);var r=c({address:e,weight:n});return console.table(r),r}(t);e=[].concat(_toConsumableArray(e),[n])});return e}();t.length>1?l(t):1===t.length?(n(t[0].address),"string"!=typeof t[0]&&console.warn(d)):console.warn("Pointer from template is undefined.")}var h,g=void 0;return function(t){t.isSingle="single",t.isMultiple="multiple",t.isDefault="default",t.isFromTemplate="template",t.isUndefined="undefined"}(h||(h={})),t.fund=function(t,e){if("string"==typeof t){if("default"===t){if(void 0!==g)return"string"==typeof g?n(g):l(g),h.isDefault;throw new Error(r)}return n(t),h.isSingle}if(o=t,Array.isArray(o))return l(t),h.isMultiple;var o;if(void 0===t)return m(),h.isFromTemplate;throw new Error(i)},t.setDefaultAddress=function(t){g=t},t}({});
