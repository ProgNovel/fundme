"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var fund=function(e){function t(e){return function(e,t){e?e.content=t:e=function(e){var t=document.createElement("meta");return t.name="monetization",t.content=e,document.head.appendChild(t),t}(t);return e}(document.querySelector('meta[name="monetization"]'),e)}function n(e){t(e)}var r="Fundme.js: default address not found. Use setDefaultAddress(str: string) to set it first.",o="Fundme.js: Invalid Web Monetization pointer address is given.",i="Fundme.js: address not found.",a="Fundme.js: address must be a string.";var u="Fundme.js: no monetization template is found.",s="Fundme.js: <template /> has no data-fund attribute to parse.",d="Fundme.js: found single <template data-fund /> but has weight - only address will be parsed.",f=5;function l(e){t(function(e){var t=e.address;if(!t)throw new Error(i);if("string"!=typeof t)throw new Error(a);return t}(function(e){var t=function(e){return Math.random()*e}(function(e){var t=e.map(function(e){return e.weight});return Object.values(t).reduce(function(e,t){return e+t},0)}(e));return function(e,t){for(var n in e)if((t-=e[n].weight)<=0)return e[n]}(e,t)}(function(e){return e.map(function(e){if("string"==typeof e&&(e={address:e,weight:f}),!("address"in e))throw new Error(i);return c(e)})}(e))))}function c(e){return void 0!==e.weight&&NaN!==e.weight||(console.warn("Fundme.js: "+e.address+" has weight that is not a number. It has been set to "+f+" (default)."),e.weight=f),e}var m="template[data-fund]";function h(){var e=function(){var e=document.body.querySelectorAll(m),t=[];if(!(e.length>0))throw new Error(u);e.forEach(function(e){var n=function(e){var t=e.dataset.fund,n=void 0!==e.dataset.fundWeight?parseInt(e.dataset.fundWeight,0):f;if(!t)throw new Error(s);return c({address:t,weight:n})}(e);t=[].concat(_toConsumableArray(t),[n])});return t}();e.length>1?(console.log("Scrapped from templates:"),console.table(e),l(e)):1===e.length?(n(e[0].address),"string"!=typeof e[0]&&console.warn(d)):console.warn("Pointer from template is undefined.")}var g,p=void 0;return function(e){e.isSingle="single",e.isMultiple="multiple",e.isDefault="default",e.isFromTemplate="template",e.isUndefined="undefined"}(g||(g={})),e.fund=function(e,t){if("string"==typeof e){if("default"===e){if(void 0!==p)return"string"==typeof p?n(p):l(p),g.isDefault;throw new Error(r)}return n(e),g.isSingle}if(i=e,Array.isArray(i))return l(e),g.isMultiple;var i;if(void 0===e)return h(),g.isFromTemplate;throw new Error(o)},e.setDefaultAddress=function(e){p=e},e}({});
