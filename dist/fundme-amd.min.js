define(["exports"],function(e){"use strict";function t(e){return function(e,t){e?e.content=t:e=function(e){const t=document.createElement("meta");return t.name="monetization",t.content=e,document.head.appendChild(t),t}(t);return e}(document.querySelector('meta[name="monetization"]'),e)}function n(e){t(e)}const r="Fundme.js: default address not found. Use setDefaultAddress(str: string) to set it first.",o="Fundme.js: Invalid Web Monetization pointer address is given.",i="Fundme.js: address not found.",s="Fundme.js: address must be a string.";const u="Fundme.js: no monetization template is found.",d="Fundme.js: <template /> has no data-fund attribute to parse.",a="Fundme.js: found single <template data-fund /> but has weight - only address will be parsed.",f=5;function l(e){t(function(e){const t=e.address;if(!t)throw new Error(i);if("string"!=typeof t)throw new Error(s);return t}(function(e){let t=function(e){return Math.random()*e}(function(e){const t=e.map(e=>e.weight);return Object.values(t).reduce((e,t)=>e+t,0)}(e));return function(e,t){for(const n in e)if((t-=e[n].weight)<=0)return e[n]}(e,t)}(function(e){return e.map(e=>{let t;if("string"==typeof e&&(e={address:e,weight:f}),!("address"in e))throw new Error(i);return t=c(e)})}(e))))}function c(e){return void 0!==e.weight&&NaN!==e.weight||(console.warn(`Fundme.js: ${e.address} has weight that is not a number. It has been set to ${f} (default).`),e.weight=f),e}function m(){const e=function(){const e=document.body.querySelectorAll("template[data-fund]");let t=[];if(!(e.length>0))throw new Error(u);e.forEach(e=>{const n=function(e){let t=e.dataset.fund,n=parseInt(e.dataset.fundWeight);if(!t)throw new Error(d);const r=c({address:t,weight:n});return console.table(r),r}(e);t=[...t,n]});return t}();e.length>1?l(e):1===e.length?(n(e[0].address),"string"!=typeof e[0]&&console.warn(a)):console.warn("Pointer from template is undefined.")}let h;var w;!function(e){e.isSingle="single",e.isMultiple="multiple",e.isDefault="default",e.isFromTemplate="template",e.isUndefined="undefined"}(w||(w={})),e.fund=function(e,t){if("string"==typeof e){if("default"===e){if(void 0!==h)return"string"==typeof h?n(h):l(h),w.isDefault;throw new Error(r)}return n(e),w.isSingle}if(i=e,Array.isArray(i))return l(e),w.isMultiple;var i;if(void 0===e)return m(),w.isFromTemplate;throw new Error(o)},e.setDefaultAddress=function(e){h=e},Object.defineProperty(e,"__esModule",{value:!0})});