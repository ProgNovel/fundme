var fundme=function(t){"use strict";function n(t){return function(t,n){t?t.content=n:t=function(t){const n=document.createElement("meta");return n.name="monetization",n.content=t,document.head.appendChild(n),n}(n);return t}(document.querySelector('meta[name="monetization"]'),t)}function e(t){n(t)}const r="Fundme.js: default address not found. Use setDefaultAddress(str: string) to set it first.",i="Fundme.js: Invalid Web Monetization pointer address is given.",o="Fundme.js: address not found.",s="Fundme.js: address must be a string.";const u="Fundme.js: no monetization template is found.",a="Fundme.js: fails to parse address from <template data-fund></template>.",d="Fundme.js: cannot parse JSON from <script fundme>. Make sure it contains a valid JSON.",f="Fundme.js: found <script fundme> but it's not an array.",c='Fundme.js: found <script fundme> but its type is not "application/json"',l=5;function m(t){n(function(t){const n=t.address;if(!n)throw new Error(o);if("string"!=typeof n)throw new Error(s);return n}(function(t){let n=function(t){return Math.random()*t}(function(t){const n=t.map(t=>t.weight);return Object.values(n).reduce((t,n)=>t+n,0)}(t));return function(t,n){for(const e in t)if((n-=t[e].weight)<=0)return t[e]}(t,n)}(p(t))))}function p(t){return t.map(t=>{let n;if("string"==typeof t&&(t=function(t){let n,e=t;const r=t.split("#");r.length>1&&(e=r[0],n=parseInt(r[1],10));return{address:e,weight:n||l}}(t)),!("address"in t))throw new Error(o);return n=h(t)})}function h(t){return void 0!==t.weight&&NaN!==t.weight||(console.warn(`Fundme.js: ${t.address} has weight that is not a number. It has been set to ${l} (default).`),t.weight=l),t}const w="template[data-fund]",g="script[fundme]";function y(){const t=[...function(){const t=document.body.querySelectorAll(w);let n=[];t.length&&t.forEach(t=>{const e=function(t){let n=t.dataset.fund,e=void 0!==t.dataset.fundWeight?parseInt(t.dataset.fundWeight,0):l;if(!n)throw new Error(a);return h({address:n,weight:e})}(t);n=[...n,e]});return n}(),...function(){const t=document.body.querySelectorAll(g);let n=[];t.length&&t.forEach(t=>{n=function(t){let n,e=[];try{n=JSON.parse(t.innerHTML)}catch(t){throw new Error(d)}if("application/json"!==t.type)throw new Error(c);if(Array.isArray(n))e=p(n);else{if("string"!=typeof n)throw new Error(f);e=p([n])}return e}(t)});return n}()];if(!t.length)throw new Error(u);m(t)}let j,E;var F;function v(t){return E=t}return function(t){t.isSingle="single",t.isMultiple="multiple",t.isDefault="default",t.isFromTemplate="template",t.isUndefined="undefined"}(F||(F={})),t.fund=function(t,n){if("string"==typeof t){if("default"===t){if(void 0!==j)return"string"==typeof j?e(j):m(j),v(F.isDefault);throw new Error(r)}return e(t),v(F.isSingle)}if(o=t,Array.isArray(o))return m(t),v(F.isMultiple);var o;if(void 0===t)return y(),v(F.isFromTemplate);throw new Error(i)},t.setDefaultAddress=function(t){j=Array.isArray(t)?p(t):t},t}({});